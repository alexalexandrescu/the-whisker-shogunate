{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://whisker-shogunate.com/schemas/relationship.schema.json",
  "title": "Relationship",
  "description": "A link or dependency between two entities in the world",
  "type": "object",
  "required": ["id", "type", "relationshipType", "from", "to"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^rel_[a-z0-9_-]+$",
      "description": "Unique relationship identifier"
    },
    "type": {
      "type": "string",
      "const": "relationship"
    },
    "relationshipType": {
      "type": "string",
      "enum": [
        "uses", "requires", "produces", "contains", "locatedIn",
        "memberOf", "ruledBy", "friendOf", "rivalOf", "childOf",
        "mentorOf", "employedBy", "trades", "conflicts", "allies",
        "dependsOn", "enables", "precedes", "influences"
      ],
      "description": "Type of relationship"
    },
    "from": {
      "type": "string",
      "pattern": "^(material|location|character|faction|technology|profession|item|event|culture)_[a-z0-9_-]+$",
      "description": "Source entity ID"
    },
    "to": {
      "type": "string",
      "pattern": "^(material|location|character|faction|technology|profession|item|event|culture)_[a-z0-9_-]+$",
      "description": "Target entity ID"
    },
    "bidirectional": {
      "type": "boolean",
      "default": false,
      "description": "Whether this relationship works both ways"
    },
    "strength": {
      "type": "string",
      "enum": ["weak", "moderate", "strong", "required", "absolute"],
      "description": "How strong or important this relationship is"
    },
    "context": {
      "type": "string",
      "description": "Additional context about this relationship"
    },
    "quantity": {
      "type": "string",
      "description": "Quantity or extent (e.g., 'extensive', 'minimal', '5 units')"
    },
    "status": {
      "type": "string",
      "enum": ["current", "historical", "potential", "conditional"],
      "description": "Current status of this relationship"
    },
    "startDate": {
      "type": "string",
      "description": "When this relationship began (if applicable)"
    },
    "endDate": {
      "type": "string",
      "description": "When this relationship ended (if applicable)"
    },
    "assets": {
      "type": "object",
      "properties": {
        "diagram": {
          "type": "string",
          "description": "Visual diagram showing this relationship"
        }
      }
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "lastModified": {
      "type": "string",
      "format": "date-time"
    },
    "contributors": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "notes": {
      "type": "string"
    }
  }
}
