{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://whisker-shogunate.com/schemas/character.schema.json",
  "title": "Character",
  "description": "An NPC or historical figure in the Whisker Shogunate",
  "type": "object",
  "required": ["id", "type", "name", "description"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^character_[a-z0-9_-]+$",
      "description": "Unique identifier (e.g., character_shogun-tora, character_lady-shiro)"
    },
    "type": {
      "type": "string",
      "const": "character"
    },
    "characterType": {
      "type": "string",
      "enum": ["major-npc", "minor-npc", "historical-figure", "player-archetype", "legendary"],
      "description": "Type of character"
    },
    "name": {
      "type": "string",
      "description": "Character's common name"
    },
    "nameJapanese": {
      "type": "string"
    },
    "pronunciation": {
      "type": "string"
    },
    "title": {
      "type": "string",
      "description": "Title or honorific (e.g., Shogun, Lord, Lady, Master)"
    },
    "description": {
      "type": "string",
      "minLength": 20,
      "description": "Character summary"
    },
    "appearance": {
      "type": "object",
      "properties": {
        "breed": {
          "type": "string",
          "description": "Cat breed or type"
        },
        "furColor": {
          "type": "string",
          "description": "Fur color and pattern"
        },
        "size": {
          "type": "string",
          "enum": ["small", "medium", "large", "very-large"]
        },
        "build": {
          "type": "string",
          "enum": ["lean", "average", "muscular", "stocky", "elegant"]
        },
        "distinguishingFeatures": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Scars, markings, accessories, etc."
        },
        "age": {
          "type": "string",
          "description": "Age in human-equivalent years"
        },
        "typicalAttire": {
          "type": "string",
          "description": "What they typically wear"
        }
      }
    },
    "background": {
      "type": "object",
      "properties": {
        "origin": {
          "type": "string",
          "enum": ["native-born", "isekai"],
          "description": "Native or isekai'd"
        },
        "yearsInNekokuni": {
          "type": "number",
          "description": "Years since arrival (if isekai'd)"
        },
        "birthPlace": {
          "type": "string",
          "pattern": "^location_[a-z0-9_-]+$",
          "description": "Where they were born or arrived"
        },
        "currentResidence": {
          "type": "string",
          "pattern": "^location_[a-z0-9_-]+$",
          "description": "Where they currently live"
        },
        "socialClass": {
          "type": "string",
          "enum": ["shogun-daimyo", "samurai", "artisan", "merchant", "farmer", "newcomer"]
        },
        "pathStage": {
          "type": "string",
          "enum": ["newcomer", "apprentice", "journey-cat", "established", "master", "elder"],
          "description": "Stage in The Path system"
        }
      }
    },
    "personality": {
      "type": "object",
      "properties": {
        "traits": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "3-5 core personality traits"
        },
        "demeanor": {
          "type": "string",
          "description": "How they present themselves"
        },
        "values": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "What they consider important"
        },
        "flaws": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Character flaws or weaknesses"
        },
        "quirks": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Distinctive behaviors or mannerisms"
        }
      }
    },
    "role": {
      "type": "object",
      "properties": {
        "occupation": {
          "type": "string",
          "pattern": "^profession_[a-z0-9_-]+$",
          "description": "Current profession"
        },
        "position": {
          "type": "string",
          "description": "Specific position or rank"
        },
        "affiliations": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^faction_[a-z0-9_-]+$"
          },
          "description": "Guilds or factions they belong to"
        },
        "responsibilities": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "What they're supposed to do"
        }
      }
    },
    "goals": {
      "type": "object",
      "properties": {
        "shortTerm": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "longTerm": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "secret": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Hidden ambitions"
        }
      }
    },
    "relationships": {
      "type": "object",
      "properties": {
        "family": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "characterId": {
                "type": "string",
                "pattern": "^character_[a-z0-9_-]+$"
              },
              "relation": {
                "type": "string",
                "description": "parent, sibling, child, etc."
              },
              "status": {
                "type": "string",
                "enum": ["alive", "deceased", "unknown"]
              },
              "quality": {
                "type": "string",
                "enum": ["excellent", "good", "neutral", "complicated", "poor", "estranged"]
              }
            }
          }
        },
        "professional": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "characterId": {
                "type": "string",
                "pattern": "^character_[a-z0-9_-]+$"
              },
              "relation": {
                "type": "string",
                "description": "boss, colleague, subordinate, etc."
              },
              "quality": {
                "type": "string"
              }
            }
          }
        },
        "personal": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "characterId": {
                "type": "string",
                "pattern": "^character_[a-z0-9_-]+$"
              },
              "relation": {
                "type": "string",
                "description": "friend, rival, romantic, mentor, etc."
              },
              "quality": {
                "type": "string"
              },
              "description": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "skills": {
      "type": "object",
      "properties": {
        "professional": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Job-related skills"
        },
        "personal": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Hobbies and interests"
        },
        "combat": {
          "type": "string",
          "enum": ["none", "basic", "competent", "skilled", "expert", "master"],
          "description": "Fighting ability"
        }
      }
    },
    "schedule": {
      "type": "object",
      "properties": {
        "circadianType": {
          "type": "string",
          "enum": ["diurnal", "nocturnal", "crepuscular"],
          "description": "Day/night activity preference"
        },
        "dailyRoutine": {
          "type": "object",
          "description": "Where they are at different times",
          "properties": {
            "morning": {
              "type": "object",
              "properties": {
                "location": {
                  "type": "string",
                  "pattern": "^location_[a-z0-9_-]+$"
                },
                "activity": {
                  "type": "string"
                }
              }
            },
            "afternoon": {
              "type": "object",
              "properties": {
                "location": {
                  "type": "string",
                  "pattern": "^location_[a-z0-9_-]+$"
                },
                "activity": {
                  "type": "string"
                }
              }
            },
            "evening": {
              "type": "object",
              "properties": {
                "location": {
                  "type": "string",
                  "pattern": "^location_[a-z0-9_-]+$"
                },
                "activity": {
                  "type": "string"
                }
              }
            },
            "night": {
              "type": "object",
              "properties": {
                "location": {
                  "type": "string",
                  "pattern": "^location_[a-z0-9_-]+$"
                },
                "activity": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "playerInteraction": {
      "type": "object",
      "properties": {
        "meetingConditions": {
          "type": "string",
          "description": "When/how players first encounter them"
        },
        "initialAttitude": {
          "type": "string",
          "enum": ["hostile", "suspicious", "neutral", "friendly", "warm"],
          "description": "How they treat players at first"
        },
        "relationshipProgression": {
          "type": "string",
          "description": "How relationship can develop"
        },
        "dialogueStyle": {
          "type": "string",
          "description": "How they speak"
        },
        "giftPreferences": {
          "type": "object",
          "properties": {
            "loves": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "likes": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "dislikes": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "hates": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "history": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "timing": {
            "type": "string",
            "description": "When this occurred (~X years ago)"
          },
          "event": {
            "type": "string",
            "description": "What happened"
          },
          "impact": {
            "type": "string",
            "description": "How it changed them"
          },
          "eventId": {
            "type": "string",
            "pattern": "^event_[a-z0-9_-]+$",
            "description": "Reference to historical event if applicable"
          }
        }
      },
      "description": "Key life events"
    },
    "voiceCharacterization": {
      "type": "object",
      "properties": {
        "speechPatterns": {
          "type": "string",
          "description": "Vocabulary, grammar, unique phrases"
        },
        "keyPhrases": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Catchphrases or repeated sayings"
        },
        "voiceDirection": {
          "type": "string",
          "description": "If voice acted, how they should sound"
        }
      }
    },
    "assets": {
      "type": "object",
      "properties": {
        "portrait": {
          "type": "string",
          "description": "Primary character portrait"
        },
        "sprites": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Game sprites or character art variants"
        },
        "conceptArt": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "relationshipDiagrams": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Visual relationship maps"
        }
      }
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "completionPercentage": {
      "type": "number",
      "minimum": 0,
      "maximum": 100
    },
    "lastModified": {
      "type": "string",
      "format": "date-time"
    },
    "contributors": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "status": {
      "type": "string",
      "enum": ["draft", "in-progress", "review", "complete", "locked"]
    },
    "notes": {
      "type": "string"
    }
  }
}
